<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CipherCore - Sign Up</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('auth.static', filename='style.css') }}">
</head>
<body class="register-body">

    <div class="shape shape-1"></div>
    <div class="shape shape-2"></div>
    <div class="shape shape-3"></div>

    <div class="glass-container">
        
        <form action="{{ url_for('auth.register_page') }}" method="POST" class="register-form">
            <h2 class="glass-title">Sign Up</h2>

            <div class="glass-input">
                <input type="text" name="username" placeholder="Full Name" required>
            </div>

            <div class="glass-input">
                <input type="email" name="email" placeholder="Email Address" required>
            </div>

            <div class="glass-input">
                <input type="password" name="password" placeholder="Password" required>
            </div>

            <div class="glass-input">
                <input type="password" name="confirm_password" placeholder="Confirm Password" required>
            </div>

            <button type="submit" class="glass-btn">Sign Up</button>

            <p class="account-text">Already have an account? <a href="{{ url_for('auth.login_page') }}">Log in</a></p>
            
            <div class="divider">Or</div>

            <div class="social-login">
                <button type="button" class="social-btn google"><i class="fab fa-google"></i> Sign up with Google</button>
                <button type="button" class="social-btn facebook"><i class="fab fa-facebook-f"></i> Sign up with Facebook</button>
            </div>
        </form>
        
        <div class="decoration-box"></div>

        <div class="decoration-circle"></div>

    </div>

    <!-- Password mismatch alert -->
<div id="password-error" class="password-error">
    {% if error %}{{ error }}{% else %}Şifreler uyuşmuyor!{% endif %}
</div>

<script>
document.querySelector(".register-form").addEventListener("submit", function (e) {
    const password = document.querySelector("input[name='password']").value;
    const confirmPassword = document.querySelector("input[name='confirm_password']").value;
    const errorBox = document.getElementById("password-error");

    if (password !== confirmPassword) {
        e.preventDefault(); // formun gönderilmesini durdur
        errorBox.style.display = "block";

        // 3 saniye sonra otomatik kapansın
        setTimeout(() => {
            errorBox.style.display = "none";
        }, 3000);
    }
});

// Show backend error if exists
{% if error %}
window.addEventListener("DOMContentLoaded", () => {
    const errorBox = document.getElementById("password-error");
    errorBox.style.display = "block";
    setTimeout(() => {
        errorBox.style.display = "none";
    }, 3000);
});
{% endif %}
</script>

</body>
</html>