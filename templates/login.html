<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CipherCore - Secure Login</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('auth.static', filename='style.css') }}">
</head>
<body>

    <div class="container">
        
        <div class="panel left-panel">
            <div class="content-wrapper">
                <h3>New here?</h3>
                <p>Join CipherCore secure mail system and explore end-to-end encryption.</p>
                
                <a href="{{ url_for('auth.register_page') }}" 
                   class="btn transparent" 
                   style="display:flex; justify-content:center; align-items:center; text-decoration:none;">
                   SIGN UP
                </a>
                
                <img src="{{ url_for('auth.static', filename='images/enc.png') }}" 
                     class="image" 
                     alt="Enc">
            </div>
        </div>

        <div class="panel right-panel">
            <form action="{{ url_for('auth.login_post') }}" method="POST" class="signin-form">
                <h2 class="title">Sign In</h2>
                
                <div class="input-field">
                    <i class="fas fa-user"></i>
                    <input type="email" name="email" placeholder="Email" required />
                </div>
                
                <div class="input-field">
                    <i class="fas fa-lock"></i>
                    <input type="password" name="password" placeholder="Password" required />
                </div>
                
                <input type="submit" value="LOGIN" class="btn solid" />

                <p class="social-text">Or Sign in with social platforms</p>
                <div class="social-media">
                    <a href="#" class="social-icon"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" class="social-icon"><i class="fab fa-twitter"></i></a>
                    <a href="#" class="social-icon"><i class="fab fa-google"></i></a>
                    <a href="#" class="social-icon"><i class="fab fa-linkedin-in"></i></a>
                </div>
            </form>
        </div>

    </div>

    <!-- PASSWORD ERROR POPUP -->
    <div class="password-error"
         id="passwordError"
         data-error="{{ 'true' if error else 'false' }}">
        Email or password is incorrect
    </div>

    <script>
        window.addEventListener("DOMContentLoaded", () => {
            const errorBox = document.getElementById("passwordError");

            // Her zaman kapalı başla (geri tuşu bug'ını çözer)
            errorBox.style.display = "none";

            // Backend’ten hata var mı kontrol et
            const hasError = errorBox.dataset.error === "true";

            if (hasError) {
                errorBox.style.display = "block";

                setTimeout(() => {
                    errorBox.style.display = "none";
                }, 3000);
            }
        });
    </script>

</body>
</html>
